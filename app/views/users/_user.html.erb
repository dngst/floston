<%= turbo_stream_from user %>

<% if user_is_admin? %>
  <div id="<%= dom_id(user) %>" class="my-6">
    <div class="border border-gray-300 p-4 lg:p-5 rounded flex items-center justify-between max-w-lg">

      <div class="w-full">
        <h3 class="lg:text-xl text-lg font-semibold w-full"><%= user.name %></h3>
        <p class="py-2">
        <%= user.tenant.unit_type %> &middot;
        <%= link_to user.tenant.property.name, property_path(user.tenant.property), data: { turbo_frame: "_top" } %>
        </p>

        <!-- Desktop profile link -->
        <div class="hidden lg:flex">
          <%= link_to user_path(user), data: { turbo_frame: "_top" }, class: "hover:underline" do %>
            <p class="text-gray-600 mt-2 underline">View profile</p>
          <% end %>
        </div>

        <!-- Mobile buttons -->
        <div class="lg:hidden flex flex-col p-4">
          <%= link_to "View profile", user_path(user), data: { turbo_frame: "_top" }, class: "btn-outline-primary mb-3" %>

          <div class="grid grid-flow-col justify-stretch">
            <%= link_to "Edit", edit_user_path(user), data: { turbo_frame: "_top" }, class: "btn-outline-secondary mr-2" %>
            <%= button_to "Delete", user, method: :delete, data: { turbo_confirm: "Delete tenant?" }, class: "btn-outline-danger w-full" %>
          </div>
        </div>
      </div>

      <!-- Desktop actions (edit and delete icons) -->
      <div class="hidden lg:flex justify-between mx-2">
        <div class="mx-2">
          <%= link_to edit_user_path(user), data: { turbo_frame: "_top" }, aria: { label: "Edit a tenant's details" }, class: "btn-secondary" do %>
            Edit
          <% end %>
        </div>

        <div class="mx-1">
          <%= link_to user_path(user), data: { turbo_method: :delete, turbo_confirm: "Delete tenant?" }, aria: { label: "Delete a tenant" }, class: "btn-danger"  do %>
            Delete
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>

